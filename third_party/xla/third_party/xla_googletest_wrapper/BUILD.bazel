package(default_visibility = ["//visibility:public"])

cc_library(
    name = "gtest",
    # Upstream gtest is *not* marked testonly for some reason, but
    # gutil:status_matchers is, and non-testonly targets can't depend on
    # testonly ones.
    #
    # XLA doesn't use gtest in non-testonly targets though so making this
    # testonly should (TM) be fine.
    testonly = True,
    hdrs = [
        "include/gmock/gmock.h",
        "include/gtest/gtest.h",
    ],
    includes = [
        "include",
    ],
    deps = [
        "@com_google_absl//absl/status",
        "@com_google_absl//absl/status:statusor",
        "@com_google_googletest_upstream//:gtest",
    ],
)

cc_library(
    name = "gtest_main",
    testonly = True,
    deps = [
        ":gtest",
        "@com_google_googletest_upstream//:gtest_main",
    ],
)

alias(
    name = "gtest_for_library",
    actual = ":gtest",
)
